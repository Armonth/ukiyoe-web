web:
    build: .
    command: node server.js
    links:
     - mongodb
     - elasticsearch
    ports:
     - "8000:8000"
    volumes:
     - data/ukiyoe/:/data
    environment:
     - PORT=8000
     - MONGODB_URL=mongodb://localhost:27017/ukiyoe
     - ELASTICSEARCH_URL=http://localhost:9200
     - BASE_DATA_DIR=/data
     - BASE_DATA_URL=http://data.ukiyo-e.org/
     - ME_PASSWORD=USERNAME
     - ME_USERNAME=PASSWORD
     - ME_SERVER=matchengine.tineye.com
     - S3_BUCKET=data.ukiyo-e.org
     - S3_SECRET=SECRET
     - S3_STATIC_BUCKET=static.ukiyo-e.org
     - THUMB_SIZE=220x220
     - SCALED_SIZE=300x300
mongodb_data_container:
    image: busybox
    command: true
    volumes:
     - /data/db
mongodb:
    image: dockerfile/mongodb
    ports:
     - "27017:27017"
    volumes_from:
     - mongodb_data_container
elasticsearch_data_container:
    image: busybox
    command: true
    volumes:
     - /data
elasticsearch:
    image: dockerfile/elasticsearch
    ports:
     - "9200:9200"
     - "9300:9300"
    volumes_from:
     - elasticsearch_data_container
